@model Pipelights.Website.Models.Cart

@{
    ViewData["Title"] = "Checkout";
}
<br />
<br />
<br />
<br />
<br />
<br />
<div class="container">
    <div class="row">
        <div class="col-md-8">
            <form method="post" action="~/Cart/PlaceOrder">
                <div class="form-group">
                    <label for="name">Nume</label>
                    <input required type="text" class="form-control" id="name" name="name" placeholder="Nume">
                </div>

                <div class="form-group">
                    <label for="surname">Prenume</label>
                    <input required type="text" class="form-control" id="surname" name="surname" placeholder="Prenume">
                </div>

                <div class="form-group">
                    <label for="email">Email </label>
                    <input required type="email" class="form-control" id="email" name="email" placeholder="Email">
                </div>

                <div class="form-group">
                    <label for="telephone">Telefon </label>
                    <input required type="text" class="form-control" id="telephone" name="telephone" placeholder="Telefon">
                </div>

                <div class="form-group">
                    <label for="judete">Judet</label>
                    <select required name="judete" id="judete">
                        <option value="0">Alege Judet</option>
                        <option value="Alba">Alba</option>
                        <option value="Arad">Arad</option>
                        <option value="Arges">Arges</option>
                        <option value="Bacau">Bacau</option>
                        <option value="Bihor">Bihor</option>
                        <option value="Bistrita Nasaud">Bistrita Nasaud</option>
                        <option value="Botosani">Botosani</option>
                        <option value="Brasov">Brasov</option>
                        <option value="Braila">Braila</option>
                        <option value="Bucuresti">Bucuresti</option>
                        <option value="Buzau">Buzau</option>
                        <option value="Caras Severin">Caras Severin</option>
                        <option value="Calarasi">Calarasi</option>
                        <option value="Cluj">Cluj</option>
                        <option value="Constanta">Constanta</option>
                        <option value="Covasna">Covasna</option>
                        <option value="Dambovita">Dambovita</option>
                        <option value="Dolj">Dolj</option>
                        <option value="Galati">Galati</option>
                        <option value="Giurgiu">Giurgiu</option>
                        <option value="Gorj">Gorj</option>
                        <option value="Harghita">Harghita</option>
                        <option value="Hunedoara">Hunedoara</option>
                        <option value="Ialomita">Ialomita</option>
                        <option value="Iasi">Iasi</option>
                        <option value="Ilfov">Ilfov</option>
                        <option value="Maramures">Maramures</option>
                        <option value="Mehedinti">Mehedinti</option>
                        <option value="Mures">Mures</option>
                        <option value="Neamt">Neamt</option>
                        <option value="Olt">Olt</option>
                        <option value="Prahova">Prahova</option>
                        <option value="Satu Mare">Satu Mare</option>
                        <option value="Salaj">Salaj</option>
                        <option value="Sibiu">Sibiu</option>
                        <option value="Suceava">Suceava</option>
                        <option value="Teleorman">Teleorman</option>
                        <option value="Timis">Timis</option>
                        <option value="Tulcea">Tulcea</option>
                        <option value="Vaslui">Vaslui</option>
                        <option value="Valcea">Valcea</option>
                        <option value="Vrancea">Vrancea</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="localitate">Localitate</label>
                    <input required type="text" class="form-control" id="localitate" name="localitate" placeholder="Localitate">
                </div>

                <div class="form-group">
                    <label for="address">Adresa</label>
                    <input required type="text" class="form-control" id="address" name="address" placeholder="Adresa">
                </div>

                @*#region Payment*@
                <div>
                    <h3>Detalii Plata</h3>
                    <div class="form-check">
                        <input required class="form-check-input" type="radio" name="payment" id="ramburs" value="Plata prin Ramburs" checked>
                        <label class="form-check-label" for="ramburs">
                            Plata la livrare
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="payment" id="bankTransfer" value="Transfer Bancar">
                        <label class="form-check-label" for="bankTransfer">
                            Plata prin transfer Bancar
                        </label>
                    </div>

                    <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="payment" id="onlineWithCard" value="Online cu Card Bancar" disabled>
                        <label class="form-check-label" for="onlineWithCard">
                            Online cu Card Bancar (indisponibil momentan)
                        </label>
                    </div>
                </div>
                @*endregion payment*@
                <button type="submit" style="
                                     background-color: #bc003b;
                                     color: white;
                                     padding: 6px;
                                     width: 350px;
                                     padding: 6px;
                                     width: 250px;
                                     border-radius: 7px;
                                     border:0">
                    Plaseaza comanda
                </button>
            </form>
        </div>
        <div class="col-md-4">
            <h3>Sumar comanda</h3>
            <div>
                @{
                    var subtotal = 0;
                }
                @foreach (var product in Model.ProductsForCart)
                {
                    <div>
                        <img style="height: 100px" src="@product.ProductDetails.MainImage" />
                    </div>
                    <div>
                        <p>@product.ProductDetails.Description.Substring(0, Math.Min(product.ProductDetails.Description.Length, 50))</p>
                        <p>@product.Quantity</p>
                        @{
                            var price = 0;
                        }

                        @if (!string.IsNullOrEmpty(product.ProductDetails.PriceReduced))
                        {
                            <p>@product.ProductDetails.PriceReduced</p>
                            int.TryParse(product.ProductDetails.PriceReduced, out price);
                        }
                        else
                        {
                            <p>@product.ProductDetails.Price</p>
                            int.TryParse(product.ProductDetails.Price, out price);
                        }

                        @{

                            subtotal = subtotal + product.Quantity * price;
                        }
                    </div>
                }
                <div>
                    <h4>Subtotal: @subtotal</h4>
                </div>
            </div>
        </div>
    </div>
</div>
